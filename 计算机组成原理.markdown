1 解释保护位，舍入位，粘贴位的作用
    保护位：在浮点数计算中，在右边多保留的两位中的首位，用于提高舍入精度
    舍入位：在浮点数计算中，在右边多保留的两位中的第二位，使浮点中间结果满足浮点格式，得到最近的数
    粘贴位：同保护位和舍入位一样用于舍入的位，当舍入位右边有非零的数据时将其置1
2 简述冯诺依曼理论的三个要点
    五大部件：运算器，存储器，输入设备，输出设备，控制器
    采用二进制
    程序和原始数据先存入存储器，然后再启动计算机工作
3 简述一个C语言程序转换为可执行程序的4个步骤
    编译：把高级语言编译为汇编语言
    汇编：把汇编语言转化成机器语言
    链接：将程序与库链接成一个可执行文件
    加载：将可执行文件加载到主存中
4 解释程序具有的局部性
    时间局部性：某个数据项再被访问后在短时间内可能被再次访问
    空间局部性：某个数据项被访问后，其附近的数据项也可能被访问
5  阐述硬件设计的三个基本原则
    简单源于规整，越小越快，优秀的设计需要适宜的折中方案
6 简述缩短CPU时间的方法
    CPU时间==指令数*CPI*时钟周期
    可以减少时钟周期，减小CPI，减少指令数，权衡时钟频率和时钟周期数
7 同第3题
8 同第4题
9 请画出乘除法器原理图，并解释一个除法的执行过程
    ![乘法器](./乘法器.png)
    ![除法器](./除法器.png)
    除法的执行过程：
        步骤一：余数寄存器左移一位
        步骤二：余数寄存器高32位减去除数寄存器中的数
        步骤三：若相减后余数寄存器中的最高位为0，则上商到余数寄存器最低位为1，若相减后余数寄存器中的最高位为1，上商到余数寄存器最低位为0
10 MIPS如何得到一个32位的立即数
    先利用Lui将16位立即数置入高16位，再利用Ori将低16位立即数置入低16位，得到32位立即数
11 简述控制冒险的三种解决方法
    1）假定分支不发生：执行分支指令时，假设分支不发生，继续执行顺序的指令流。如果分支发生，就丢弃己经读取并译码的指令，并按分支目标继续执行；如果分支不发生的可能性是 50 %, 同时丢弃的代价很小，那么这种优化方法可以将控制冒险的代价减半。

    2）缩短分支延迟：为了将分支决策提前，需要提前两个动作：计算分支目标地址和判断分支条件。分支目标地址的计算是比较简单的，我们在 IF/ID 流水线寄存器中已经有了 PC 的值和立即数字段，所以只需要将分支地址计算从 EX 级移到 ID 级就可以了。
    判断分支条件比较复杂。为了判断分支的执行条件，需要比较从 ID 级取到的两个寄存器的值是否相等，判断相等的方法可以是先将对应的位进行异或操作，然后将结果按位进行或操作。为了把分支条件判断提前到 ID 级，还需要额外的旁路和冒险检测硬件，因为分支条件的判断可能依赖于还在流水线中的结果。

    3）动态分支预测：动态分支预测是通过查找指令的地址观察上一次执行该指令时分支是否发生，如果上次执行时分支发生，就从上次分支发生的地方开始取新的指令。
12 什么是局部性原理，具体包括哪些类型
    同第4题
13 MIPS中，I型指令的格式为：Op Rs Rt Constant or Address，即指令中只有一个操作数是立即数，试问I型指令为什么没选择包括两个立即数的格式
    1 简单源于规整，优秀的设计需要适宜的折中方案，为了保持指令格式的一致性，MIPS指令集中没有选择包括两个立即数的格式。
    2 两个立即数会导致寻址范围减小，影响程序执行
14 请画出乘法器硬件结构图，并写出实现乘法的算法步骤
    ![乘法器](./乘法器.png)
    算法步骤：
        1 若乘数最低位为0，无操作；若乘数最低位为1，将被乘数加到积寄存器高32位
        2 积寄存器右移
        3 重复步骤一、步骤二直到积寄存器中64位全为积
15 简述缩短CPU时间的方法
    同第6题
16 请举例说明计算机系统结构8个伟大思想中的一个及其作用
    计算机系统结构8个伟大思想：
        1 面向摩尔定律的设计    e.g.芯片设计要依据完成时的工业水平
        2 使用抽象简化设计      e.g.使用高级程序语言编程时可以不用过多考虑底层的机器指令如何实现功能
        3 加速大概率事件        e.g.采用静态分支预测，即假定分布发生或不发生的策略解决控制冒险，加速执行
        4 通过并行提高性能      e.g.通过并行树乘法器加快乘法运算;采用多处理器提高CPU性能
        5 通过流水线提高性能    e.g.多周期指令通过流水线的实现方式加速，提高执行性能
        6 通过预测提高性能      e.g.通过动态分支预测来减少控制冒险可能造成的阻塞，提高执行性能
        7 存储器层次            e.g.速度最快、容量最小、每位价格最贵的在顶层
        8 通过冗余提高可靠性     e.g.通过增加硬件支持解决流水线中的结构冒险
17 在存储器层次结构中，处理写操作的方法有写回和写直达，对Cache与主存，主存与外部存储器，应该用哪种方法，为什么
    Cache与主存，可采用写回和写直达，写直达替换方法简单，但需要写缓冲区，写回法需要保存更多的状态;对主存与外部存储器，由于磁盘的写延迟较长，只能使用写回机制
18 C语言数组同一行的数组元素有限分配存储空间，如下代码段：
    for(i=0;i<8;i++)
        for(j=0;j<8000;j++)
            a[i][j]=b[i][0]+a[i][j];
    根据上面的代码段，分析变量访问的时间局部性和空间局部性
    时间局部性：如果某个数据项被访问，那么在不久的将来它可能再次被访问，如程序段中的数组变量b[i][0]，具有时间局部性。

    空间局部性：如果某个数据项被访问，与它地址相邻的数据项很快可能也将被访问，如程序段中，a[i][j]（j<7009）被访问后，与其地址相邻的a[i][j+1]很快也被访问。
19 同17题
20 MIPS指令集的三项设计原则是什么？举例说明这些原则是如何应用到具体指令中的
    简单源于规整：MIPS的指令大体分为R型和I型，具有整齐的统一结构
    越小越快：MIPS中只有32个寄存器
    优秀的设计需要适宜的折中方案：保持所有的指令长度相同，但不同类型的指令采用不同的指令格式
21 旁路是如何解决数据冒险的？是否能解决所有的数据冒险？并举例说明
    通过转发，直接送到需要用到该数据的地方解决冒险，不能，比如lw指令的目的寄存器是下一条指令add的rs或rt寄存器，此时无法通过转发解决数据冒险
22 直接相连映射，组相连映射，全相联映射的共同点是什么，它们之间的关系是什么？
    直接相联映射、组相联映射、全相联映射的共同点是主存和cache都是分成同样大小的存储区块
    组相联映射是直接相连映射和全相联映射的结合，若cache只有一组则为全相联映射，若一组中只有一块这为直接相联映射
23 MIPS中，$ZERO寄存器的作用和意义
    $ZERO寄存器可以用来得到立即数如通过指令add $t0 $ZERO 12或是利用and $t1 $t1 $ZERO将寄存器置零
24 执行指令最多的处理器需要更多的CPU时间，这种说法正确吗，请举例说明
    错误的，CPU时间==指令数*CPI*时钟周期，执行指令数多的处理器可能有较小的CPI和时钟周期，例如CICS与RICS，RICS执行指令更多，但是RICS执行速度可能更快
25 简述MIPS寻址方式
    1立即数寻址
    2寄存器寻址
    3基址寻址
    4PC相对寻址
    5伪直接寻址
    （1 指令寻址
        顺序寻址4 PC=PC+4
        跳跃 由转移指令给出
    2 数据寻址
        立即寻址 形式地址A就是操作数
        直接寻址 有效地址由形式地址直接给出
        隐含寻址 操作数地址隐含在操作码中
        间接寻址 有效地址由形式地址间接提供
        寄存器寻址 有效地址即为寄存器编号
        寄存器间接寻址 有效地址在寄存器中
        基址寻址 采用专用寄存器作基址寄存器
                采用通用寄存器作基址寄存器
        变址寻址 采用专用/通用寄存器+有效地址
        相对寻址 EA=(PC+4)+A，A是相对于当前指令的位移量
        堆栈寻址 ）
26 流水线有哪些类型的冒险？举例说明，MIPS是如何解决的？
    数据冒险：利用旁路转发，阻塞
    控制冒险：假定分支不发生，缩短分支的延迟，动态分支预测
27 在MIPS中，当前PC的高8位是0000 1111，执行指令J 2FFFFFE后，PC的值是多少，为什么？
    PC=0x0BFFFFF8
    因为J指令会把26位立即数左移两位，用00补齐，再用PC高四位进行补齐
28 设计一个能实现两个8位数相乘的快速乘法器的硬件结构图，并说明设计思路
    ![乘法器](./Q28乘法器.png)
    乘数放在乘积寄存器的后8位，取最后一位，如果是1则令乘积寄存器高八位与被乘数相加，如果是0则不变，再将乘积寄存器整体右移
29 下表是TLB，页表以及Cache访问中可能的组合，完成表第四栏的内容填写
    TLB     页表    Cache       这种情况可能发生吗，在什么情况下发生
    命中    命中    缺失    可能，因为页远大于块的大小，可能出现页命中了但是块未命中
    缺失    命中    命中    可能，因为该页可能是第一次出现，未进入TLB中
    缺失    命中    缺失    可能，见前两条
    缺失    缺失    缺失    可能，如果页未命中那么就会出现三个都未命中的情况
    命中    缺失    缺失    不可能，TLB是页表的子集
    命中    缺失    命中    不可能，TLB是页表的子集
    缺失    缺失    命中    不可能，页未命中，块不可能命中


***计算应用题***
1 IEEE754计算，A=-5.25，B=7.125，二者都是IEEE754单精度格式的浮点数，求A-B？要求将A，B表示成IEEE754的时候进行计算，写出计算步骤，并且将计算结果转化成16进制表示
![A1](./A1.png)
2 ![Q2](./Q2.png)
![A2](./A2.png)
3 ![Q3](./Q3.png)
![A3](./A3.png)
4 ![Q4](./Q4.png)
![A4](./A4.png)
5 ![Q5](./Q5.png)
![A5](./A5.png)
详见平板

***综合设计题***
详见平板